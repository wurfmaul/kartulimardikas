/*
 @license
 This file was created 2014-2015 by https://github.com/wurfmaul
 and licensed under the GNU GENERAL PUBLIC LICENSE Version 3
 https://gnu.org/licenses/gpl-3.0.txt
 */
(function(){$(function(){return $(".close").click(function(){return $(this).parent(".alert").hide("slow")})})}).call(this),function(){var t;t=function(){function t(){}return t.init=function(){return this.sectionNumberToPanels(this.computeSectionNumber())},t.updateUrl=function(t){return $.ajax("api/url.php",{type:"GET",data:{parameters:t},dataType:"text",success:function(t){return function(t){return window.history.pushState("","",t)}}(this)})},t.performToggle=function(t){var e;return this.toggleSection(t,"slow"),e=this.panelsToSectionNumber(t),this.sectionNumberToPanels(e),this.updateUrl({params:window.current.parameters,section:e}),this.storeSectionNumber(e)},t.hideSection=function(t,e){return t.find(".glyphicon").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-right"),t.siblings(".panel-collapse").hide(e),$(t).addClass("collapsed")},t.showSection=function(t,e){return t.find(".glyphicon").removeClass("glyphicon-chevron-right").addClass("glyphicon-chevron-down"),t.siblings(".panel-collapse").show(e),$(t).removeClass("collapsed")},t.toggleSection=function(t,e){return t.find(".glyphicon").toggleClass("glyphicon-chevron-right glyphicon-chevron-down"),t.siblings(".panel-collapse").toggle(e),$(t).toggleClass("collapsed")},t.panelsToSectionNumber=function(t){var e,r;return r=0,e=1,t.closest(".scope").find(".panel-heading").each(function(){return $(this).hasClass("collapsed")||(r+=e),e*=2}),r},t.sectionNumberToPanels=function(e){return $(".scope").each(function(){var r,n,i,o,s,a;for(o=$(this).find(".panel-heading"),i=o.length-1,a=e,t.showSection(o,0),s=[];a>=0&&i>=0;)r=Math.pow(2,i),a>=r?a-=r:(n=$(o[i]),t.hideSection(n,0)),s.push(i--);return s})},t.computeSectionNumber=function(){var t;return null!=(t=window.current.section)?t:localStorage&&null!=(t=localStorage.getItem("section_"+window.current.action))?t:window.defaults.section},t.storeSectionNumber=function(t){return localStorage.setItem("section_"+window.current.action,t)},t}(),t.init(),$(function(){return $(".panel-heading").click(function(){return t.performToggle($(this))})})}.call(this),function(){var t,e,r,n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;window.Value=function(){function o(){}return o.prototype.execute=function(t){throw new ExecutionError("could_not_execute_value",[value])},o.read=function(t,e){var r,n,i;switch(t.kind){case"index":r=t.index.execute(e)+0,e.stats.readArrayVar(t.vid,r),n=e.memory.arrayGet(t.vid,r);break;case"var":i=t.vid,e.stats.readVar(i),n=e.memory.get(i).value;break;default:throw new ExecutionError("unknown_kind",[t.kind])}if(n===window.defaults.init.no)throw new ExecutionError("var_not_initialized",[]);return n},o.write=function(t,e,r){var n;switch(t.kind){case"index":return n=t.index.execute(r),r.memory.arraySet(t.vid,n,e),r.stats.writeArrayVar(t.vid,n,e);case"var":return r.memory.set(t.vid,e),r.stats.writeVar(t.vid,e);case"const":throw new ExecutionError("assign_to_const",[t.value]);case"prop":throw new ExecutionError("assign_to_prop",[]);default:throw new ExecutionError("unknown_kind",[t.kind])}},o.parse=function(o,s){var a,u,c,h,l,p,d,f,v,y,m;if(o=$.trim(o),u=DataType.parse(o))return new e(u.type,u.value);if(p=o.indexOf("["),a=o.lastIndexOf("]"),p>-1&&a>p)return m=s.find(o.substr(0,p)),c=this.parse(o.substr(p+1,a-p-1),s),m>-1&&null!=c?(s.count(m),new r(m,c)):null;if(d=o.indexOf("."),f=o.substr(d+1),d>-1&&/^[A-Za-z]+$/.test(f))return m=s.find(o.substr(0,d)),m>-1?(s.count(m),new n(m,f)):null;if(/^[A-Za-z]+$/.test(o))return m=s.find(o),m>-1?(s.count(m),new i(m)):null;if(o=o.replace(/\s*/g,""),-1===o.indexOf("(")&&(y=o.split(/(-|\+|\*|\/|%|&|\|)/i),3===y.length))return h=this.parse(y[0],s),v=this.parse(y[2],s),null!=h&&null!=v&&"+-*/%&|".indexOf(y[1])>=0?new t(h,v,y[1]):null;if(null!=(o=this.parsePars(o)))switch(Object.keys(o).length){case 1:return this.parse(o[0],s);case 3:if(h=this.parse(o[0],s),v=this.parse(o[2],s),l=o[1],null!=h&&null!=v&&"+-*/%&|".indexOf(o[1])>=0)return new t(h,v,l)}return null},o.parsePars=function(t){var e,r,n,i,o,s,a,u;for(o=0,a={},n=0,u=t.split(/(-|\+|\*|\/|%|&|\||\(|\))/g),r=i=0,s=u.length;s>=0?s>i:i>s;r=s>=0?++i:--i)if(e=u[r],""!==e)if(0===o)"("===e?o++:")"===e?o--:a[n++]=e;else{if("("===e)o++;else if(")"===e&&0===--o){n++;continue}null!=a[n]?a[n]+=e:a[n]=e}return 0!==o?(console.warn("Unbalanced expression!"),null):a},o}(),t=function(t){function e(t,e,r){this.left=t,this.right=e,this.op=r,this.kind="comp"}return o(e,t),e.prototype.execute=function(t){var e,r;switch(e=this.left.execute(t),r=this.right.execute(t),t.stats.incArithmeticLogicOps(),this.op){case"+":return e+r;case"-":return e-r;case"*":return e*r;case"/":if(0===r)throw new ExecutionError("divide_by_zero",[]);return parseInt(e/r);case"%":return e%r;case"&":return e&&r;case"|":return e||r;default:throw new ExecutionError("unknown_arithmetic_op",[this.op])}},e.prototype.toJSON=function(){return{k:"e",l:this.left.toJSON(),r:this.right.toJSON(),o:this.op}},e}(Value),e=function(t){function e(t,e){this.type=t,this.value=e,this.kind="const"}return o(e,t),e.prototype.execute=function(t){return this.value},e.prototype.toJSON=function(){return{k:"c",t:this.type,v:this.value}},e}(Value),r=function(t){function e(t,e){this.vid=t,this.index=e,this.kind="index"}return o(e,t),e.prototype.execute=function(t){var e;if(e=t.memory.get(this.vid),!e.array)throw new ExecutionError("no_array_for_index",[e.name]);return Value.read(this,t)},e.prototype.toJSON=function(){return{k:"i",i:this.vid,x:this.index.toJSON()}},e}(Value),n=function(t){function e(t,e){this.vid=t,this.prop=e,this.kind="prop",this.type="i"}return o(e,t),e.prototype.execute=function(t){var e;if("length"===this.prop)return e=t.memory.get(this.vid),e.array?e.value.split(",").length:1;throw new ExecutionError("unknown_property",[this.prop])},e.prototype.toJSON=function(){return{k:"p",i:this.vid,p:this.prop}},e}(Value),i=function(t){function e(t){this.vid=t,this.kind="var"}return o(e,t),e.prototype.execute=function(t){return Value.read(this,t)},e.prototype.toJSON=function(){return{k:"v",i:this.vid}},e}(Value),window.DataType=function(){function t(){}return t.parse=function(t){var e,r;return r=parseInt(t),r+""===t?{type:"i",value:r}:(e=t.toLowerCase(),"true"===e||"false"===e?{type:"b",value:"true"===e}:!1)},t}()}.call(this),function(){var t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t},e={}.hasOwnProperty;window.Node=function(){function t(){}return t.prototype.execute=function(t,e){throw new Error("Node must override execute() method!")},t.prototype.mark=function(t,e){return e===this.nid?(t.setCursor(this.nid,0),this.nid):-1},t.prototype.toJSON=function(){throw new Error("Node must override toJSON() method!")},t.parse=function(t,e,r){var n;switch(n=t.data("node-type")){case"assign":return AssignNode.parse(t,e,r);case"comment":return CommentNode.parse(t,e,r);case"compare":return CompareNode.parse(t,e,r);case"function":return FunctionNode.parse(t,e,r);case"if":return IfNode.parse(t,e,r);case"inc":return IncNode.parse(t,e,r);case"return":return ReturnNode.parse(t,e,r);case"swap":return SwapNode.parse(t,e,r);case"value":return ValueNode.parse(t,e,r);case"while":return WhileNode.parse(t,e,r);default:throw new Error("Parse error: unknown type: '"+n+"'")}},t.parseAndCheckValue=function(t,e,r){var n;return e=this.findSubNode(e,t),n=Value.parse(e.val(),r),null==n||""===e.val()?e.addClass("error"):e.removeClass("error"),n},t.parseAndCheckVar=function(t,e,r){var n;return e=this.findSubNode(e,t),n=Value.parse(e.val(),r),null==n||"var"!==n.kind&&"index"!==n.kind?(e.addClass("error"),null):(e.removeClass("error"),n)},t.findSubNode=function(t,e){return t.find(e+":first")},t.validate=function(t,e){var r;return r=t.find(".invalid-flag:first"),e?(t.removeClass("invalid"),r.hide()):(t.addClass("invalid"),r.show())},t}(),window.AssignNode=function(e){function r(t,e,r,n){this.nid=t,this.to=e,this.fromNode=r,this.fromVal=n}return t(r,e),r.prototype.execute=function(t,e){var r,n;if(this.fromNode.size()){if(r=this.fromNode.execute(t,0),null!=r.scope)return r;n=r.value}else n=this.fromVal.execute(t);return Value.write(this.to,n,t),{value:n}},r.prototype.mark=function(t,e){return(e===this.nid||e===this.fromNode.nid)&&(e=this.nid),r.__super__.mark.call(this,t,e)},r.prototype.toJSON=function(){var t,e;return{i:this.nid,n:"as",t:null!=(t=this.to)?t.toJSON():void 0,f:this.fromNode.nid,v:null!=(e=this.fromVal)?e.toJSON():void 0}},r.parse=function(t,e,n){var i,o,s,a;return a=r.parseAndCheckVar(".assign-to",t,n),i=BlockNode.parse(r.findSubNode(t,".assign-from"),e,n),e.push(i),o=r.parseAndCheckValue(".assign-from-val",t,n),r.validate(t,null!=a&&(i.size()||null!=o)),s=e.length,new r(s,a,i,o)},r}(Node),window.BlockNode=function(e){function r(t,e){this.nid=t,this.nodes=e,this.curNode=0}return t(r,e),r.prototype.execute=function(t,e){var r,n,i,o,s,a,u;for(r=null,a=this.nodes,n=i=0,o=a.length;o>i;n=++i)if(s=a[n],s>=e){r=t.tree.get(s).execute(t,e);break}return u=null!=(null!=r?r.value:void 0)?r.value:!1,null!=(null!=r?r.scope:void 0)?r:null!=(null!=r?r.next:void 0)?{next:r.next,value:u}:-1===r?{next:-1,value:u}:this.nodes.length>n+1?{next:this.nodes[n+1],value:u}:{value:u}},r.prototype.executeAll=function(t,e,r){var n,i,o,s,a,u,c,h,l;for(n=r===window.defaults.execute.all,l=n,c=-1,h=this.nodes,o=s=0,a=h.length;a>s;o=++s){if(u=h[o],u>e){c=u;break}if(i=t.tree.get(u).execute(t,u).value,l=n?l&&i:l||i,window.defaults.shortCircuit&&!l)break}return{value:l,next:c}},r.prototype.evaluateAll=function(t){var e,r,n,i,o,s;for(s=[],o=this.nodes,r=0,n=o.length;n>r;r++)i=o[r],e=t.tree.get(i).execute(t,i).value,s.push(e);return s},r.prototype.mark=function(t,e){var r,n,i,o,s,a,u,c,h;if(e===this.nid){for(c=this.nodes,r=n=0,o=c.length;o>n;r=++n)if(u=c[r],a=t.tree.get(u).mark(t,u),a>-1)return a;return-1}for(h=this.nodes,r=i=0,s=h.length;s>i;r=++i)if(u=h[r],u>=e){if(a=t.tree.get(u).mark(t,e),a>-1)return a;e=u+1}return-1},r.prototype.size=function(){return this.nodes.length},r.prototype.toJSON=function(){return{i:this.nid,n:"bk",c:this.nodes}},r.parse=function(t,e,n){var i,o;return o=[],t.children("li.node").each(function(t,r){var i;return i=Node.parse($(r),e,n),e.push(i),o[t]=i.nid}),i=e.length,new r(i,o)},r}(Node),window.CommentNode=function(e){function r(t,e){this.nid=t,this.comment=e}return t(r,e),r.prototype.execute=function(t,e){return{value:!1}},r.prototype.mark=function(t,e){return-1},r.prototype.toJSON=function(){return{i:this.nid,n:"cm",c:this.comment}},r.parse=function(t,e,n){var i,o;return i=r.findSubNode(t,".comment-text").val(),o=e.length,new r(o,i)},r}(Node),window.CompareNode=function(e){function r(t,e,r,n){this.nid=t,this.left=e,this.right=r,this.operator=n}return t(r,e),r.prototype.execute=function(t,e){var r,n;switch(r=this.left.execute(t),n=this.right.execute(t),t.stats.incCompareOps(),this.operator){case"le":return{value:n>=r};case"lt":return{value:n>r};case"eq":return{value:r===n};case"gt":return{value:r>n};case"ge":return{value:r>=n};case"ne":return{value:r!==n};default:throw new Error("CompareNode: unknown operator: '"+this.operator+"'!")}},r.prototype.toJSON=function(){var t,e;return{i:this.nid,n:"cp",l:null!=(t=this.left)?t.toJSON():void 0,r:null!=(e=this.right)?e.toJSON():void 0,o:this.operator}},r.parse=function(t,e,n){var i,o,s,a;return i=r.parseAndCheckValue(".compare-left",t,n),a=r.parseAndCheckValue(".compare-right",t,n),r.validate(t,null!=i&&null!=a),s=r.findSubNode(t,".compare-operation").val(),o=e.length,new r(o,i,a,s)},r}(Node),window.FunctionNode=function(e){function r(t,e,r,n){this.nid=t,this.callee=e,this.paramsLine=r,this.params=n}return t(r,e),r.prototype.execute=function(t,e){var r,n,i;return n=t.scope,r=$("#scope-"+n+" .node_"+this.nid),null!=r.data("return-value")?(i=r.data("return-value"),r.removeData("return-value"),{value:i}):this.callFunction(t,r)},r.prototype.callFunction=function(t,e){var r,n,i,o;return n=t.scope+1,o=$("#proto-scope-"+this.callee).clone(!0,!0).attr("id","scope-"+n),r=$("<a/>").data("target","#scope-"+n).addClass("scope-"+n),r.attr("aria-controls","scope-"+n).attr("role","tab").attr("data-toggle","tab"),r.text(o.find(".algorithm-name").text()),$("#scopes-head").append($("<li/>").attr("role","presentation").append(r)),$("#scopes-body").append(o),i=this.params.size()?this.params.evaluateAll(t):this.paramsLine,{scope:n,node:this.nid,params:i}},r.prototype.mark=function(t,e){return(e===this.nid||e===this.params.nid)&&(e=this.nid),r.__super__.mark.call(this,t,e)},r.prototype.toJSON=function(){return{i:this.nid,n:"ft",c:this.callee,l:this.paramsLine,p:this.params.nid}},r.parse=function(t,e,n){var i,o,s,a,u,c,h,l,p,d;if(i=t.data("callee-id"),h=[],p=r.findSubNode(t,".act-pars-line").val(),l=!1,""!==p)for(d=p.split(";"),o=0,s=d.length;s>o;o++)u=d[o],u=r.parseValue(u,t,n),null==u?l=!0:h.push(u.value);return c=BlockNode.parse(r.findSubNode(t,".act-pars"),e,n),e.push(c),r.validate(t,i>0&&!l),a=e.length,new r(a,i,h,c)},r}(Node),window.IfNode=function(e){function r(t,e,r,n,i){this.nid=t,this.condition=e,this.ifBody=r,this.elseBody=n,this.op=i}return t(r,e),r.prototype.execute=function(t,e){var r,n,i,o;if(e<=this.condition){if(r=t.tree.get(this.condition),i=r.size(),1===i)n=r.execute(t,e);else{if(!(i>1))throw new ExecutionError("no_condition",[]);n=r.executeAll(t,e,this.op)}return o=n.value+0!==0,n.next>-1?{next:n.next,value:o}:o?{next:this.ifBody,value:o}:{next:this.elseBody,value:o}}return e<=this.ifBody?t.tree.get(this.ifBody).execute(t,e):t.tree.get(this.elseBody).execute(t,e)},r.prototype.mark=function(t,e){return e===this.nid?t.tree.get(this.condition).mark(t,this.condition):e<=this.condition?t.tree.get(this.condition).mark(t,e):e<=this.ifBody?t.tree.get(this.ifBody).mark(t,e):t.tree.get(this.elseBody).mark(t,e)},r.prototype.toJSON=function(){return{i:this.nid,n:"if",c:this.condition,b:this.ifBody,e:this.elseBody,o:this.op}},r.parse=function(t,e,n){var i,o,s,a,u,c;return i=BlockNode.parse(r.findSubNode(t,".if-condition"),e,n),e.push(i),s=BlockNode.parse(r.findSubNode(t,".if-body"),e,n),e.push(s),o=BlockNode.parse(r.findSubNode(t,".if-else"),e,n),e.push(o),c=i.size(),r.validate(t,c>0),u=r.findSubNode(t,".if-operator"),c>1?u.show():u.hide(),a=e.length,new r(a,i.nid,s.nid,o.nid,u.val())},r}(Node),window.IncNode=function(e){function r(t,e,r){this.nid=t,this.variable=e,this.operator=r}return t(r,e),r.prototype.execute=function(t,e){var r,n,i,o;switch(o=this.variable.vid,i=this.variable.execute(t),this.operator){case"i":n=i+1;break;case"d":n=i-1;break;default:throw new Error("IncNode: invalid operator "+this.operator)}return"index"===this.variable.kind?(r=this.variable.index.execute(t),t.memory.arraySet(o,r,n),t.stats.writeArrayVar(o,r,n)):(t.memory.set(o,n),t.stats.writeVar(o,n)),{value:i}},r.prototype.toJSON=function(){var t;return{i:this.nid,n:"ic",v:null!=(t=this.variable)?t.toJSON():void 0,o:this.operator}},r.parse=function(t,e,n){var i,o,s;return s=r.parseAndCheckVar(".inc-var",t,n),r.validate(t,null!=s),o=r.findSubNode(t,".inc-operation").val(),i=e.length,new r(i,s,o)},r}(Node),window.ReturnNode=function(e){function r(t,e,r){this.nid=t,this.retVal=e,this.retNode=r}return t(r,e),r.prototype.execute=function(t,e){var r,n;if(this.retNode.size()){if(r=this.retNode.execute(t,0),null!=r.scope)return r;n=r.value}else n=this.retVal.execute(t);return $("#scope-"+t.scope+" .return-value").val(n).focus(),-1},r.prototype.mark=function(t,e){return(e===this.nid||e===this.retNode.nid)&&(e=this.nid),r.__super__.mark.call(this,t,e)},r.prototype.toJSON=function(){var t;return{i:this.nid,n:"rt",v:null!=(t=this.retVal)?t.toJSON():void 0,r:this.retNode.nid}},r.parse=function(t,e,n){var i,o,s;return s=r.parseAndCheckValue(".return-val",t,n),o=BlockNode.parse(r.findSubNode(t,".return-value-node"),e,n),e.push(o),r.validate(t,null!=s||o.size()),i=e.length,new r(i,s,o)},r}(Node),window.SwapNode=function(e){function r(t,e,r){this.nid=t,this.left=e,this.right=r}return t(r,e),r.prototype.execute=function(t,e){var r,n;return r=this.left.execute(t),n=this.right.execute(t),Value.write(this.left,n,t),Value.write(this.right,r,t),{value:r!==n}},r.prototype.toJSON=function(){var t,e;return{i:this.nid,n:"sw",l:null!=(t=this.left)?t.toJSON():void 0,r:null!=(e=this.right)?e.toJSON():void 0}},r.parse=function(t,e,n){var i,o,s;return i=r.parseAndCheckValue(".swap-left",t,n),s=r.parseAndCheckValue(".swap-right",t,n),r.validate(t,null!=i&&null!=s),o=e.length,new r(o,i,s)},r}(Node),window.ValueNode=function(e){function r(t,e){this.nid=t,this.value=e}return t(r,e),r.prototype.execute=function(t,e){return{value:this.value.execute(t)}},r.prototype.toJSON=function(){var t;return{i:this.nid,n:"vl",v:null!=(t=this.value)?t.toJSON():void 0}},r.parse=function(t,e,n){var i,o;return o=r.parseAndCheckValue(".value-var",t,n),r.validate(t,null!=o),i=e.length,new r(i,o)},r}(Node),window.WhileNode=function(e){function r(t,e,r,n){this.nid=t,this.condition=e,this.body=r,this.op=n}return t(r,e),r.prototype.execute=function(t,e){var r,n,i,o;if(e<=this.condition){if(n=t.tree.get(this.condition),o=n.size(),1===o)i=n.execute(t,e);else{if(!(o>1))throw new ExecutionError("no_condition",[]);i=n.executeAll(t,e,this.op)}return i.next>-1?{next:i.next}:i.value?{next:this.body}:{}}return e<=this.body?(r=t.tree.get(this.body).execute(t,e),null!=r.scope?r:null!=r.next?{next:r.next}:{next:this.condition}):void 0},r.prototype.mark=function(t,e){var r,n;return n=t.tree.get(this.condition),e===this.nid?n.mark(t,this.condition):e<=this.condition?n.mark(t,e):(r=t.tree.get(this.body),r.size()?r.mark(t,e):n.mark(t,this.condition))},r.prototype.toJSON=function(){return{i:this.nid,n:"wl",c:this.condition,b:this.body,o:this.op}},r.parse=function(t,e,n){var i,o,s,a,u;return o=BlockNode.parse(r.findSubNode(t,".while-condition"),e,n),e.push(o),i=BlockNode.parse(r.findSubNode(t,".while-body"),e,n),e.push(i),u=o.size(),r.validate(t,u>0),a=r.findSubNode(t,".while-operator"),u>1?a.show():a.hide(),s=e.length,new r(s,o.nid,i.nid,a.val())},r}(Node)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};window.Memory=function(){function e(e){this.table=e,this.reset=t(this.reset,this),this.arraySet=t(this.arraySet,this),this.arrayGet=t(this.arrayGet,this),this.arrayCheck=t(this.arrayCheck,this),this.set=t(this.set,this),this.get=t(this.get,this),this.find=t(this.find,this),this.count=t(this.count,this),this.memory=new Object,this.original=new Object,this.table.children().not("#var-prototype").each(function(t){return function(e,r){var n,i,o,s;return s=$(r).data("vid"),i=$(r).data("name"),o=$(r).data("value"),n="["===$(r).data("type").charAt(0),t.memory[s]={vid:s,name:i,value:o,array:n,count:0},t.original[s]={vid:s,name:i,value:o,array:n,count:0}}}(this))}return e.prototype.count=function(t){var e;return e=this.memory[t],++e.count},e.prototype.find=function(t){var e;return e=-1,$.each(this.memory,function(r,n){return n.name===t?e=n.vid:void 0}),e},e.prototype.get=function(t){return this.memory[t]},e.prototype.set=function(t,e){var r;try{e.split(","),this.memory[t].array=!0}catch(e){r=e,this.memory[t].array=!1}return this.memory[t].value=e},e.prototype.arrayCheck=function(t,e){var r,n;if(n=this.get(t),!n.array)throw new ExecutionError("no_array_for_index",[n.name]);if(r=n.value.split(","),0>e||r.length<=e)throw new ExecutionError("index_out_of_bounds",[n.name,e,r.length]);return r},e.prototype.arrayGet=function(t,e){var r,n;return r=this.arrayCheck(t,e),n=r[e],parseInt(n)+""===n?parseInt(n):n},e.prototype.arraySet=function(t,e,r){var n;return n=this.arrayCheck(t,e),n[e]=r,this.set(t,n.join(","))},e.prototype.reset=function(){return $.each(this.original,function(t){return function(e,r){return t.memory[e].value=r.value,t.memory[e].count=0}}(this))},e}()}.call(this),function(){var t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t},e={}.hasOwnProperty;window.Tree=function(){function t(t){this.scope=t,this.memory=new Memory($("#scope-"+this.scope+" .variables>tbody")),this.reset()}return t.prototype.execute=function(t,e){return this.get(this.root).execute(t,e)},t.prototype.mark=function(t,e){return this.get(this.root).mark(t,e)},t.prototype.get=function(t){return this.nodes[t]},t.prototype.reset=function(){var t;return this.memory.reset(),this.nodes=[],t=BlockNode.parse($("#scope-"+this.scope+" .node_root"),this.nodes,this.memory),this.root=this.nodes.length,this.nodes.push(t)},t.prototype.toJSON=function(){var t,e,r,n,i,o;for(r=[],o=this.nodes,t=e=0,n=o.length;n>e;t=++e)i=o[t],r[t]=i.toJSON();return r},t.toJSON=function(){return new this(0).toJSON()},t}(),window.ExecutionError=function(e){function r(t,e){this.message=t,this.parts=e}return t(r,e),r}(Error)}.call(this),function(){var t,e,r,n,i,o;t=function(){function t(t,r){this.tree=t,this.scope=r,this.curScope=$("#scope-"+this.scope),this.memory=this.tree.memory,this.stats=new e(this.memory,this.scope),this.speed=this.loadSpeed(),this.breaks=this.loadBreaks(),this.tempo=0,this.reset()}return t.prototype.reset=function(){return null!=this.timer&&this.play(),this.tree.reset(),this.stats.reset(),$("#scopes-head").children(":gt("+this.scope+")").remove(),$("#scopes-body").children(":gt("+this.scope+")").remove(),this.curScope.find(".return-value").val(""),this.curNode=null,this.nextNode=this.tree.mark(this,this.tree.root),this.nextCandidate=null,this.cursorState=0,this.clearHighlight(),this.nextNode>=0?this.setControls([0,1,1,1]):this.setControls([0,0,0,0]),$("#alert").hide("slow")},t.prototype.play=function(){var t;return null!=this.timer?(this.timer=clearInterval(this.timer),this.curScope.find(".img-play").removeClass("glyphicon-pause").addClass("glyphicon-play"),this.tempo=0):(t=window.defaults.maxSteps,this.playStep=0,this.timer=setInterval(function(e){return function(){return e.playStep<=t?(e.step(),e.playStep++):e.handleError(new ExecutionError("too_many_steps",[t]))}}(this),this.speed),this.curScope.find(".img-play").removeClass("glyphicon-play").addClass("glyphicon-pause"),this.tempo=1)},t.prototype.step=function(){var t,e,r,n;if(this.clearHighlight(),0===this.cursorState){this.curNode=this.nextNode;try{if(t=this.tree.execute(this,this.curNode),null!=t.scope)return this.curNode=t.node,void this.callFunction(t.scope,t.params);null!=t.next&&t.next>=0?this.nextCandidate=t.next:this.nextCandidate=null}catch(t){return e=t,this.handleError(e),this.setControls([1,0,0,0]),!1}if(this.curScope.find(".stop-after").is(":checked"))return this.cursorState=1,this.setCursor(this.curNode,this.cursorState),!0}return null!=this.nextCandidate?(this.cursorState=0,this.nextNode=this.tree.mark(this,this.nextCandidate),this.setControls([1,1,1,1]),this.curScope.find(".stop-before").is(":checked")?!0:this.step()):(r=this.tempo,null!=this.timer&&this.play(),this.unsetCursor(),this.setControls([1,0,0,0]),this.scope>0&&(n=this.curScope.find(".return-value").val(),window.players[this.scope-1].returnFunction(this.scope,n,r)),!1)},t.prototype.finish=function(){var t,e,r,n;for(this.tempo=2,r=window.defaults.maxSteps,t=e=0,n=r;n>=0?n>=e:e>=n;t=n>=0?++e:--e)if(!this.step())return;return this.handleError(new ExecutionError("too_many_steps",[r]))},t.prototype.callFunction=function(t,e){var n,i;return this.setControls([0,0,0,0]),null!=this.timer&&(this.play(),this.tempo=1),r(t,this.tempo),i=players[t],n=$("#scope-"+t).find(".variables .parameter"),n.length!==e.length?(this.handleError(new ExecutionError("function_pars",e.length,n.length)),!1):(n.each(function(){var t,r;return r=$(this).data("vid"),t=e.shift(),i.memory.set(r,t),i.stats.writeVar(r,t)}),$("#scopes-head .scope-"+t).tab("show"))},t.prototype.returnFunction=function(t,e,r){switch($("#scopes-head .scope-"+this.scope).tab("show"),$("#scopes-head .scope-"+t).parent().remove(),$("#scope-"+t).remove(),window.players[t+1]=null,this.curScope.find(".node_"+this.curNode).data("return-value",e),this.setControls([1,1,1,1]),r){case 2:return this.finish();case 1:return this.play();default:return this.tempo=r,this.step()}},t.prototype.changeSpeed=function(t){return this.speed=t,this.play(),this.play(),"undefined"!=typeof localStorage&&null!==localStorage?localStorage.setItem("speed",t):void 0},t.prototype.loadSpeed=function(){var t;return"undefined"!=typeof localStorage&&null!==localStorage&&null!=(t=localStorage.getItem("speed"))?t:window.defaults.speed},t.prototype.changeBreaks=function(t){return"undefined"!=typeof localStorage&&null!==localStorage?localStorage.setItem("breaks",t):void 0},t.prototype.loadBreaks=function(){var t,e;return t="undefined"!=typeof localStorage&&null!==localStorage&&null!=(e=localStorage.getItem("breaks"))?e:window.defaults.breaks,this.changeBreaks(t),("before"===t||"both"===t)&&(this.curScope.find(".stop-before").prop("checked",!0),this.curScope.find(".stop-before-btn").addClass("active")),("after"===t||"both"===t)&&(this.curScope.find(".stop-after").prop("checked",!0),this.curScope.find(".stop-after-btn").addClass("active")),t},t.prototype.handleError=function(t){var e;return e=errorCodes[t.message],null!=e?$.each(t.parts,function(t,r){return e=e.replace(new RegExp("%"+(t+1),"g"),r)}):(e=errorCodes.undefined,console.error(t)),$("#alertText").html(e),$("#alert").show("slow")},t.prototype.clearHighlight=function(){return this.curScope.find(".highlight-write").removeClass("highlight-write"),this.curScope.find(".highlight-read").removeClass("highlight-read")},t.prototype.setControls=function(t){var e,r,n,i,o;for(e=this.curScope.find(".controls button"),o=[],r=n=0,i=e.length;i>=0?i>=n:n>=i;r=i>=0?++n:--n)0===t[r]?o.push($(e[r]).attr("disabled","disabled")):o.push($(e[r]).removeAttr("disabled"));return o},t.prototype.setCursor=function(t,e){var r;switch(e){case 0:r="cursor-up";break;case 1:r="cursor-down"}return this.unsetCursor(),this.curScope.find(".node_"+t).addClass("cursor "+r),this.curScope.find(".source-node-"+t).closest(".line").addClass("source-cursor "+r)},t.prototype.unsetCursor=function(){return this.curScope.find(".cursor").removeClass("cursor cursor-up cursor-down"),this.curScope.find(".source-cursor").removeClass("source-cursor cursor-up cursor-down")},t}(),e=function(){function t(t,e){this.memory=t,this.scope=e,this.curScope=$("#scope-"+this.scope),this.stats=["accesses","assignments","comparisons","arithmeticLogic"]}return t.prototype.inc=function(t){var e,r;return e=this.curScope.find(".stats-"+t),r=parseInt(e.val())+1,e.val(r).addClass("highlight-write")},t.prototype.incAccessOps=function(){return this.inc(this.stats[0])},t.prototype.incAssignOps=function(){return this.inc(this.stats[1])},t.prototype.incCompareOps=function(){return this.inc(this.stats[2])},t.prototype.incArithmeticLogicOps=function(){return this.inc(this.stats[3])},t.prototype.readVar=function(t){return this.curScope.find(".var-"+t+" .value-container").addClass("highlight-read"),this.incAccessOps()},t.prototype.readArrayVar=function(t,e){return this.curScope.find(".var-"+t+" .offset_"+e).addClass("highlight-read"),this.incAccessOps()},t.prototype.writeGeneric=function(t,e){return t.removeClass("highlight-read").addClass("highlight-write"),t.find(".value").text(e),this.incAssignOps()},t.prototype.writeVar=function(t,e){var r;return r=this.curScope.find(".var-"+t+" .value-container"),this.writeGeneric(r,e)},t.prototype.writeArrayVar=function(t,e,r){var n;return n=this.curScope.find(".var-"+t+" .offset_"+e),this.writeGeneric(n,r)},t.prototype.reset=function(){return $.each(this.memory.memory,function(t){return function(e,r){var n,i;return n=t.curScope.find(".var-"+e),r.array?(i=r.value.split(","),$.each(i,function(t,e){return n.find(".offset_"+t+">.value").text(e)})):n.find(".value").text(r.value)}}(this)),$.each(this.stats,function(t){return function(e,r){return t.curScope.find(".stats-"+r).val(0)}}(this))},t}(),i=function(t,e){var r,n,i;return r=$("#scope-"+e.scope),i=r.find(".stop-before-btn").hasClass("active"),n=r.find(".stop-after-btn").hasClass("active"),"before"===t.data("break")&&(i=!i),"after"===t.data("break")&&(n=!n),i&&n?e.changeBreaks("both"):i?e.changeBreaks("before"):n?e.changeBreaks("after"):t.button("toggle")},o=function(t){var e,r,n,i;return r=t.parent(),t.toggleClass("fa-plus-square fa-minus-square"),r.hasClass("collapsed")?(n=r.height(),r.css("height","auto"),e=r.height(),r.css("height",n),i=e):i="20px",r.animate({height:i},"slow","linear",function(){return r.toggleClass("collapsed")})},n=function(t){var e,r,n,i;return n=function(){return 1===Math.floor(2*Math.random())},i=function(){return Math.floor(Math.random()*(window.defaults.maxRandInt+1))},e=function(t,e){var r;return r=e(),$(t).find(".value").text(r),$(t).data("value",r)},r=function(t,e){var r;return r=[],$(t).find(".value-container").each(function(){var t;return t=e(),$(this).find(".value").text(t),r.push(t)}),$(t).data("value",r.join(","))},t.find(".variable.random").each(function(){switch($(this).data("type")){case"i":return e(this,i);case"[i":return r(this,i);case"b":return e(this,n);case"[b":return r(this,n)}})},r=function(e,r){var s,a,u;switch(s=$("#scope-"+e),n(s),u=new Tree(e),a=new t(u,e),window.players[e]=a,s.find(".btn-reset").click(function(){return a.reset()}),s.find(".btn-play").click(function(){return a.play()}),s.find(".btn-step").click(function(){return a.step()}),s.find(".btn-finish").click(function(){return a.finish()}),s.find(".speed-slider").slider({value:parseInt(1e3/a.speed),min:1,max:20,change:function(t,e){return a.changeSpeed(1e3/e.value)}}),s.find(".stop-before-btn, .stop-after-btn").click(function(){return i($(this),a)}),s.find(".toggle-comment").click(function(){return o($(this))}),s.find(".value-container").click(function(){var t,e,r;return r=$(this).hide().find(".value").text(),t=null!=(e=$(this).data("offset"))?$(this).siblings(".value-edit.offset_"+e):$(this).siblings(".value-edit"),t.val(r).show().focus()}),s.find(".value-edit").keyup(function(t){var e,r,n,i;switch(t.which){case 13:return(r=DataType.parse($(this).val()))?null!=(n=$(this).data("offset"))?(i=$(this).closest(".variable").data("vid"),e=$(this).data("offset"),a.memory.arraySet(i,e,r.value),a.stats.writeArrayVar(i,e,r.value)):(i=$(this).closest(".variable").data("vid"),a.memory.set(i,r.value),a.stats.writeVar(i,r.value)):alert(window.l10n.invalid_value.replace("%1",$(this).val())),$(this).blur();case 27:return $(this).blur()}}).blur(function(){return $(this).hide().siblings(".value-container").show()}),r){case 1:return a.play();case 2:return a.finish()}},$(function(){return window.players={},r(0,0)})}.call(this);